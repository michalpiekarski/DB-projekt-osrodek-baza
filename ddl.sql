-- Generated by Oracle SQL Developer Data Modeler 4.0.1.836
--   at:        2014-06-03 21:44:56 CEST
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g




CREATE TABLE DOMKI
  (
    id                  INTEGER NOT NULL ,
    numer               INTEGER ,
    TYPY_OBIEKTOW_nazwa VARCHAR2 (50 CHAR) NOT NULL
  ) ;
ALTER TABLE DOMKI ADD CONSTRAINT DOMKI_PK PRIMARY KEY ( id ) ;

CREATE TABLE INNE_OBIEKTY
  (
    id                  INTEGER NOT NULL ,
    TYPY_OBIEKTOW_nazwa VARCHAR2 (50 CHAR) NOT NULL
  ) ;
ALTER TABLE INNE_OBIEKTY ADD CONSTRAINT INNE_OBIEKTY_PK PRIMARY KEY ( id ) ;

CREATE TABLE KLIENCI
  (
    id       INTEGER NOT NULL ,
    imie     VARCHAR2 (20 CHAR) NOT NULL ,
    nazwisko VARCHAR2 (50 CHAR) NOT NULL ,
    adres    VARCHAR2 (100 CHAR) NOT NULL ,
    telefon  VARCHAR2 (12 CHAR) DEFAULT NULL ,
    "e-mail" VARCHAR2 (50 CHAR) DEFAULT NULL
  ) ;
ALTER TABLE KLIENCI ADD CONSTRAINT KLIENCI_PK PRIMARY KEY ( id ) ;

CREATE TABLE OBIEKTY
  ( id INTEGER NOT NULL , OSRODKI_id INTEGER NOT NULL
  ) ;
ALTER TABLE OBIEKTY ADD CONSTRAINT OBIEKTY_PK PRIMARY KEY ( id ) ;

CREATE TABLE OSRODKI
  (
    id      INTEGER NOT NULL ,
    nazwa   VARCHAR2 (50 CHAR) NOT NULL ,
    adres   VARCHAR2 (100 CHAR) NOT NULL ,
    otwarty CHAR (1) DEFAULT 0 NOT NULL
  ) ;
ALTER TABLE OSRODKI ADD CONSTRAINT OSRODKI_PK PRIMARY KEY ( id ) ;

CREATE TABLE POKOJE
  (
    id                  INTEGER NOT NULL ,
    numer               VARCHAR2 (10 CHAR) NOT NULL ,
    budynek             VARCHAR2 (20 CHAR) NOT NULL ,
    TYPY_OBIEKTOW_nazwa VARCHAR2 (50 CHAR) NOT NULL
  ) ;
ALTER TABLE POKOJE ADD CONSTRAINT POKOJE_PK PRIMARY KEY ( id ) ;

CREATE TABLE POSILKI
  (
    nazwa VARCHAR2 (50 CHAR) NOT NULL ,
    cena  NUMBER (5,2) NOT NULL
  ) ;
ALTER TABLE POSILKI ADD CONSTRAINT POSILKI_PK PRIMARY KEY ( nazwa ) ;

CREATE TABLE PRACOWNICY
  (
    id               INTEGER NOT NULL ,
    imie             VARCHAR2 (20 CHAR) NOT NULL ,
    naziwsko         VARCHAR2 (50 CHAR) NOT NULL ,
    adres            VARCHAR2 (100 CHAR) NOT NULL ,
    telefon          VARCHAR2 (12 CHAR) DEFAULT NULL ,
    "e-mail"         VARCHAR2 (50 CHAR) DEFAULT NULL ,
    OSRODKI_id       INTEGER ,
    STANOWISKA_nazwa VARCHAR2 (25 CHAR) ,
    placa            NUMBER (5,2) NOT NULL
  ) ;
ALTER TABLE PRACOWNICY ADD CONSTRAINT PRACOWNICY_PK PRIMARY KEY ( id ) ;

CREATE TABLE RACHUNKI
  (
    id            INTEGER NOT NULL ,
    KLIENCI_id    INTEGER NOT NULL ,
    PRACOWNICY_id INTEGER ,
    zaplacony     CHAR (1) NOT NULL ,
    kwota         NUMBER (5,2) NOT NULL
  ) ;
ALTER TABLE RACHUNKI ADD CONSTRAINT RACHUNKI_PK PRIMARY KEY ( id ) ;

CREATE TABLE REZERWACJE
  (
    id          INTEGER NOT NULL ,
    RACHUNKI_id INTEGER NOT NULL ,
    OBIEKTY_id  INTEGER NOT NULL ,
    data_od     DATE NOT NULL ,
    data_do     DATE NOT NULL
  ) ;
ALTER TABLE REZERWACJE ADD CONSTRAINT REZERWACJE_PK PRIMARY KEY ( id ) ;

CREATE TABLE REZERWACJE_DOMKOW
  ( id INTEGER NOT NULL
  ) ;
ALTER TABLE REZERWACJE_DOMKOW ADD CONSTRAINT REZERWACJE_DOMKOW_PK PRIMARY KEY ( id ) ;

CREATE TABLE REZERWACJE_INNYCH_OBIEKTOW
  ( id INTEGER NOT NULL
  ) ;
ALTER TABLE REZERWACJE_INNYCH_OBIEKTOW ADD CONSTRAINT REZERWACJE_INNYCH_OBIEKTOW_PK PRIMARY KEY ( id ) ;

CREATE TABLE REZERWACJE_POKOI
  ( id INTEGER NOT NULL
  ) ;
ALTER TABLE REZERWACJE_POKOI ADD CONSTRAINT REZERWACJE_POKOI_PK PRIMARY KEY ( id ) ;

CREATE TABLE STANOWISKA
  (
    nazwa    VARCHAR2 (25 CHAR) NOT NULL ,
    placa_od NUMBER (5,2) NOT NULL ,
    placa_do NUMBER (5,2) NOT NULL
  ) ;
ALTER TABLE STANOWISKA ADD CONSTRAINT STANOWISKA_PK PRIMARY KEY ( nazwa ) ;

CREATE TABLE TYPY_OBIEKTOW
  (
    nazwa        VARCHAR2 (50 CHAR) NOT NULL ,
    ilosc_miejsc INTEGER ,
    cena         NUMBER (5,2) NOT NULL
  ) ;
ALTER TABLE TYPY_OBIEKTOW ADD CONSTRAINT TYPY_OBIEKTOW_PK PRIMARY KEY ( nazwa ) ;

CREATE TABLE USLUGI
  (
    nazwa VARCHAR2 (50 CHAR) NOT NULL ,
    cena  NUMBER (5,2) NOT NULL
  ) ;
ALTER TABLE USLUGI ADD CONSTRAINT USLUGI_PK PRIMARY KEY ( nazwa ) ;

CREATE TABLE WYPOZYCZENIA
  (
    nazwa VARCHAR2 (50 CHAR) NOT NULL ,
    cena  NUMBER (5,2) NOT NULL
  ) ;
ALTER TABLE WYPOZYCZENIA ADD CONSTRAINT WYPOZYCZENIA_PK PRIMARY KEY ( nazwa ) ;

CREATE TABLE ZAMOWIENIA_POSILKOW
  (
    id            INTEGER NOT NULL ,
    RACHUNKI_id   INTEGER NOT NULL ,
    ilosc         INTEGER ,
    POSILKI_nazwa VARCHAR2 (50 CHAR) NOT NULL ,
    data          DATE NOT NULL
  ) ;
ALTER TABLE ZAMOWIENIA_POSILKOW ADD CONSTRAINT ZAMOWIENIA_POSILKOW_PK PRIMARY KEY ( id ) ;

CREATE TABLE ZAMOWIENIA_USLUG
  (
    id           INTEGER NOT NULL ,
    RACHUNKI_id  INTEGER NOT NULL ,
    ilosc        INTEGER ,
    USLUGI_nazwa VARCHAR2 (50 CHAR) NOT NULL ,
    data         DATE NOT NULL
  ) ;
ALTER TABLE ZAMOWIENIA_USLUG ADD CONSTRAINT ZAMOWIENIA_USLUG_PK PRIMARY KEY ( id ) ;

CREATE TABLE ZAMOWIENIA_WYPOZYCZEN
  (
    id                 INTEGER NOT NULL ,
    RACHUNKI_id        INTEGER NOT NULL ,
    ilosc              INTEGER ,
    WYPOZYCZENIA_nazwa VARCHAR2 (50 CHAR) NOT NULL ,
    data_od            DATE NOT NULL ,
    data_do            DATE NOT NULL
  ) ;
ALTER TABLE ZAMOWIENIA_WYPOZYCZEN ADD CONSTRAINT ZAMOWIENIA_WYPOZYCZEN_PK PRIMARY KEY ( id ) ;

ALTER TABLE DOMKI ADD CONSTRAINT DOMKI_TYPY_OBIEKTOW_FK FOREIGN KEY ( TYPY_OBIEKTOW_nazwa ) REFERENCES TYPY_OBIEKTOW ( nazwa ) ;

ALTER TABLE POKOJE ADD CONSTRAINT FK_ASS_178 FOREIGN KEY ( id ) REFERENCES OBIEKTY ( id ) ;

ALTER TABLE DOMKI ADD CONSTRAINT FK_ASS_179 FOREIGN KEY ( id ) REFERENCES OBIEKTY ( id ) ;

ALTER TABLE INNE_OBIEKTY ADD CONSTRAINT FK_ASS_180 FOREIGN KEY ( id ) REFERENCES OBIEKTY ( id ) ;

ALTER TABLE REZERWACJE_POKOI ADD CONSTRAINT FK_ASS_181 FOREIGN KEY ( id ) REFERENCES REZERWACJE ( id ) ;

ALTER TABLE REZERWACJE_DOMKOW ADD CONSTRAINT FK_ASS_182 FOREIGN KEY ( id ) REFERENCES REZERWACJE ( id ) ;

ALTER TABLE REZERWACJE_INNYCH_OBIEKTOW ADD CONSTRAINT FK_ASS_183 FOREIGN KEY ( id ) REFERENCES REZERWACJE ( id ) ;

ALTER TABLE INNE_OBIEKTY ADD CONSTRAINT INNE_OBIEKTY_TYPY_OBIEKTOW_FK FOREIGN KEY ( TYPY_OBIEKTOW_nazwa ) REFERENCES TYPY_OBIEKTOW ( nazwa ) ;

ALTER TABLE OBIEKTY ADD CONSTRAINT OBIEKTY_OSRODKI_FK FOREIGN KEY ( OSRODKI_id ) REFERENCES OSRODKI ( id ) ON
DELETE CASCADE ;

ALTER TABLE POKOJE ADD CONSTRAINT POKOJE_TYPY_OBIEKTOW_FK FOREIGN KEY ( TYPY_OBIEKTOW_nazwa ) REFERENCES TYPY_OBIEKTOW ( nazwa ) ;

ALTER TABLE PRACOWNICY ADD CONSTRAINT PRACOWNICY_OSRODKI_FK FOREIGN KEY ( OSRODKI_id ) REFERENCES OSRODKI ( id ) ON
DELETE SET NULL ;

ALTER TABLE PRACOWNICY ADD CONSTRAINT PRACOWNICY_STANOWISKA_FK FOREIGN KEY ( STANOWISKA_nazwa ) REFERENCES STANOWISKA ( nazwa ) ON
DELETE SET NULL ;

ALTER TABLE RACHUNKI ADD CONSTRAINT RACHUNKI_KLIENCI_FK FOREIGN KEY ( KLIENCI_id ) REFERENCES KLIENCI ( id ) ON
DELETE CASCADE ;

ALTER TABLE RACHUNKI ADD CONSTRAINT RACHUNKI_PRACOWNICY_FK FOREIGN KEY ( PRACOWNICY_id ) REFERENCES PRACOWNICY ( id ) ON
DELETE SET NULL ;

ALTER TABLE REZERWACJE ADD CONSTRAINT REZERWACJE_OBIEKTY_FK FOREIGN KEY ( OBIEKTY_id ) REFERENCES OBIEKTY ( id ) ;

ALTER TABLE REZERWACJE ADD CONSTRAINT REZERWACJE_RACHUNKI_FK FOREIGN KEY ( RACHUNKI_id ) REFERENCES RACHUNKI ( id ) ON
DELETE CASCADE ;

ALTER TABLE ZAMOWIENIA_POSILKOW ADD CONSTRAINT ZAMOWIENIA_POSILKOW_POSILKI_FK FOREIGN KEY ( POSILKI_nazwa ) REFERENCES POSILKI ( nazwa ) ;

--  ERROR: FK name length exceeds maximum allowed length(30)
ALTER TABLE ZAMOWIENIA_POSILKOW ADD CONSTRAINT ZAMOWIENIA_POSILKOW_RACH_FK FOREIGN KEY ( RACHUNKI_id ) REFERENCES RACHUNKI ( id ) ON
DELETE CASCADE ;

ALTER TABLE ZAMOWIENIA_USLUG ADD CONSTRAINT ZAMOWIENIA_USLUG_RACHUNKI_FK FOREIGN KEY ( RACHUNKI_id ) REFERENCES RACHUNKI ( id ) ON
DELETE CASCADE ;

ALTER TABLE ZAMOWIENIA_USLUG ADD CONSTRAINT ZAMOWIENIA_USLUG_USLUGI_FK FOREIGN KEY ( USLUGI_nazwa ) REFERENCES USLUGI ( nazwa ) ;

--  ERROR: FK name length exceeds maximum allowed length(30)
ALTER TABLE ZAMOWIENIA_WYPOZYCZEN ADD CONSTRAINT ZAMOWIENIA_WYPO_RACH_FK FOREIGN KEY ( RACHUNKI_id ) REFERENCES RACHUNKI ( id ) ON
DELETE CASCADE ;

--  ERROR: FK name length exceeds maximum allowed length(30)
ALTER TABLE ZAMOWIENIA_WYPOZYCZEN ADD CONSTRAINT ZAMOWIENIA_WYPO_WYPO_FK FOREIGN KEY ( WYPOZYCZENIA_nazwa ) REFERENCES WYPOZYCZENIA ( nazwa ) ;

CREATE OR REPLACE TRIGGER FKNTM_DOMKI BEFORE
  UPDATE OF TYPY_OBIEKTOW_nazwa ON DOMKI BEGIN raise_application_error(-20225,'Non Transferable FK constraint  on table DOMKI is violated');
END;
/

CREATE OR REPLACE TRIGGER FKNTM_INNE_OBIEKTY BEFORE
  UPDATE OF TYPY_OBIEKTOW_nazwa ON INNE_OBIEKTY BEGIN raise_application_error(-20225,'Non Transferable FK constraint  on table INNE_OBIEKTY is violated');
END;
/

CREATE OR REPLACE TRIGGER FKNTM_OBIEKTY BEFORE
  UPDATE OF OSRODKI_id ON OBIEKTY BEGIN raise_application_error(-20225,'Non Transferable FK constraint  on table OBIEKTY is violated');
END;
/

CREATE OR REPLACE TRIGGER FKNTM_POKOJE BEFORE
  UPDATE OF TYPY_OBIEKTOW_nazwa ON POKOJE BEGIN raise_application_error(-20225,'Non Transferable FK constraint  on table POKOJE is violated');
END;
/

CREATE OR REPLACE TRIGGER FKNTM_RACHUNKI BEFORE
  UPDATE OF KLIENCI_id ON RACHUNKI BEGIN raise_application_error(-20225,'Non Transferable FK constraint  on table RACHUNKI is violated');
END;
/

CREATE OR REPLACE TRIGGER FKNTM_ZAMOWIENIA_POSILKOW BEFORE
  UPDATE OF RACHUNKI_id ON ZAMOWIENIA_POSILKOW BEGIN raise_application_error(-20225,'Non Transferable FK constraint  on table ZAMOWIENIA_POSILKOW is violated');
END;
/

CREATE OR REPLACE TRIGGER FKNTM_ZAMOWIENIA_USLUG BEFORE
  UPDATE OF RACHUNKI_id ON ZAMOWIENIA_USLUG BEGIN raise_application_error(-20225,'Non Transferable FK constraint  on table ZAMOWIENIA_USLUG is violated');
END;
/

CREATE OR REPLACE TRIGGER FKNTM_ZAMOWIENIA_WYPOZYCZEN BEFORE
  UPDATE OF RACHUNKI_id ON ZAMOWIENIA_WYPOZYCZEN BEGIN raise_application_error(-20225,'Non Transferable FK constraint  on table ZAMOWIENIA_WYPOZYCZEN is violated');
END;
/

--  ERROR: No Discriminator Column found in Arc FKArc_18 - constraint trigger for Arc cannot be generated
--  ERROR: No Discriminator Column found in Arc FKArc_18 - constraint trigger for Arc cannot be generated
--  ERROR: No Discriminator Column found in Arc FKArc_18 - constraint trigger for Arc cannot be generated

--  ERROR: No Discriminator Column found in Arc FKArc_17 - constraint trigger for Arc cannot be generated
--  ERROR: No Discriminator Column found in Arc FKArc_17 - constraint trigger for Arc cannot be generated
--  ERROR: No Discriminator Column found in Arc FKArc_17 - constraint trigger for Arc cannot be generated

--  ERROR: No Discriminator Column found in Arc FKArc_19 - constraint trigger for Arc cannot be generated
--  ERROR: No Discriminator Column found in Arc FKArc_19 - constraint trigger for Arc cannot be generated
--  ERROR: No Discriminator Column found in Arc FKArc_19 - constraint trigger for Arc cannot be generated


-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            20
-- CREATE INDEX                             0
-- ALTER TABLE                             42
-- CREATE VIEW                              0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           8
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ERRORS                                  12
-- WARNINGS                                 0
